<div class="form-wrapper">
  <div class="form-card">
    <h2>
      <i class="fas fa-plus-circle"></i>
      Cr√©ons un exercice amusant
    </h2>

    <form (ngSubmit)="onSubmit()">
      <!-- Th√®me de l'exercice -->
      <div class="form-group">
        <label for="theme">Th√®me de l'exercice</label>
        <select id="theme" name="theme" [(ngModel)]="exercice.theme" (change)="suggestName()" required>
          <option value="">-- S√©lectionner un th√®me --</option>
          <option *ngFor="let theme of themeSuggestions" [value]="theme">{{ theme }}</option>
        </select>
      </div>

      <!-- Nom de l'exercice -->
      <div class="form-group">
        <label for="name">Nom amusant de l'exercice</label>
        <input type="text" id="name" name="name" [(ngModel)]="exercice.name" placeholder="Ex: Rangeons notre maison !" required />
      </div>

      <!-- Description de l'exercice -->
      <div class="form-group">
        <label for="description">Description (optionnelle)</label>
        <textarea id="description" name="description" [(ngModel)]="exercice.description" 
                  placeholder="D√©crivez bri√®vement l'objectif de cet exercice..."></textarea>
      </div>

      <!-- Ajout de cat√©gories -->
      <div class="form-group">
        <label>Ajouter une cat√©gorie</label>
        <div class="category-form">
          <input type="text" name="categoryName" [(ngModel)]="categoryInput.name" placeholder="Nom de la cat√©gorie (ex: Cuisine)" />
          <input type="text" name="categoryDescription" [(ngModel)]="categoryInput.description" placeholder="Description (ex: Pi√®ce o√π l'on pr√©pare √† manger)" />
          <input type="text" name="categoryImagePath" [(ngModel)]="categoryInput.imagePath" placeholder="Lien de l'image" />
        </div>
        
        <button type="button" class="btn-add" (click)="addCategory()">
          <i class="fas fa-plus"></i> Ajouter cette cat√©gorie
        </button>

        <!-- Liste des cat√©gories ajout√©es -->
        <div *ngIf="exercice.categories.length > 0" class="added-section">
          <h4>Cat√©gories ajout√©es:</h4>
          <ul>
            <li *ngFor="let category of exercice.categories; let i = index" class="category-item">
              <span>üì∑ <strong>{{ category.name }}</strong> - {{ category.description }}</span>
              <button type="button" class="btn-remove" (click)="removeCategory(i)">
                <i class="fas fa-trash"></i>
              </button>
            </li>
          </ul>
        </div>
      </div>

      <!-- Ajout d'objets -->
      <div class="form-group">
        <label>Ajouter des objets √† placer</label>

        <div class="item-box">
          <input type="text" name="itemName" [(ngModel)]="itemInput.name" placeholder="Nom de l'objet (ex: Fourchette)" />
          <input type="text" name="itemDescription" [(ngModel)]="itemInput.description" placeholder="Description (ex: Ustensile pour manger)" />
          <input type="text" name="itemImagePath" [(ngModel)]="itemInput.imagePath" placeholder="Image (URL)" />
          <select name="itemCategory" [(ngModel)]="itemInput.category">
            <option value="">-- S√©lectionner la cat√©gorie de cet objet --</option>
            <option *ngFor="let category of exercice.categories" [value]="category.name">
              {{ category.name }}
            </option>
          </select>
        </div>

        <button type="button" class="btn-add" (click)="addItem()">
          <i class="fas fa-plus"></i> Ajouter cet objet
        </button>

        <!-- Liste des objets ajout√©s -->
        <div *ngIf="exercice.items.length > 0" class="added-section">
          <h4>Objets ajout√©s:</h4>
          <ul>
            <li *ngFor="let item of exercice.items; let i = index" class="item-list">
              <span>üß© <strong>{{ item.name }}</strong> - {{ item.description }} - <em>Va dans: {{ item.category }}</em></span>
              <button type="button" class="btn-remove" (click)="removeItem(i)">
                <i class="fas fa-trash"></i>
              </button>
            </li>
          </ul>
        </div>
      </div>

      <!-- Message de succ√®s -->
      <div *ngIf="exerciceCreated" class="success-message">
        <i class="fas fa-check-circle"></i> Exercice cr√©√© avec succ√®s !
      </div>

      <!-- Soumettre -->
      <button type="submit" class="btn-submit" [disabled]="!exercice.name || !exercice.theme || exercice.categories.length === 0">
        <i class="fas fa-check-circle"></i> Cr√©er l'exercice
      </button>
    </form>
  </div>
</div>