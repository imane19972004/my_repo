<div class="form-wrapper">
  <div class="form-card">
    <h2>
      <i class="fas fa-plus-circle"></i>
      Cr√©er un exercice
    </h2>

    <form (ngSubmit)="onSubmit()">
      <!-- Nom de l'exercice -->
      <div class="form-group">
        <label for="name">Nom de l'exercice</label>
        <input type="text" id="name" name="name" [(ngModel)]="exercice.name" required />
      </div>

      <!-- Ajout de cat√©gories -->
      <div class="form-group">
        <label>Ajouter une cat√©gorie</label>
        <div class="item-box">
          <input type="text" name="categoryName" [(ngModel)]="categoryInput.name" placeholder="Nom de la cat√©gorie" />
          <input type="text" name="categoryDescription" [(ngModel)]="categoryInput.description" placeholder="Description" />
          <input type="text" name="categoryImagePath" [(ngModel)]="categoryInput.imagePath" placeholder="Lien de l'image" />
        </div>

        <button type="button" class="btn-add" (click)="addCategory()">
          <i class="fas fa-plus"></i> Ajouter Cat√©gorie
        </button>

        <!-- Liste des cat√©gories ajout√©es -->
        <ul *ngIf="exercice.categories.length > 0">
          <li *ngFor="let category of exercice.categories; let i = index" class="category-item">
            üì∑ <strong>{{ category.name }}</strong> - {{ category.description }}
            <button type="button" class="btn-remove" (click)="removeCategory(i)">
              <i class="fas fa-trash"></i>
            </button>
          </li>
        </ul>
      </div>

      <!-- Ajout d'objets -->
      <div class="form-group">
        <label>Ajouter des objets</label>

        <div class="item-box">
          <input type="text" name="itemName" [(ngModel)]="itemInput.name" placeholder="Nom de l'objet" />
          <input type="text" name="itemDescription" [(ngModel)]="itemInput.description" placeholder="Description" />
          <input type="text" name="itemImagePath" [(ngModel)]="itemInput.imagePath" placeholder="Image (URL)" />
          <select name="itemCategory" [(ngModel)]="itemInput.category">
            <option value="">-- S√©lectionner une cat√©gorie --</option>
            <option *ngFor="let category of exercice.categories" [value]="category.name">
              {{ category.name }}
            </option>
          </select>
        </div>

        <button type="button" class="btn-add" (click)="addItem()">
          <i class="fas fa-plus"></i> Ajouter un objet
        </button>

        <!-- Liste des objets ajout√©s -->
        <ul *ngIf="exercice.items.length > 0">
          <li *ngFor="let item of exercice.items; let i = index" class="item-list">
            üß© <strong>{{ item.name }}</strong> - {{ item.description }} - <em>Cat√©gorie: {{ item.category }}</em>
            <button type="button" class="btn-remove" (click)="removeItem(i)">
              <i class="fas fa-trash"></i>
            </button>
          </li>
        </ul>
      </div>

      <!-- Message de succ√®s -->
      <div *ngIf="exerciceCreated" class="success-message">
        <i class="fas fa-check-circle"></i> Exercice cr√©√© avec succ√®s !
      </div>

      <!-- Soumettre -->
      <button type="submit" class="btn-submit" [disabled]="!exercice.name || exercice.categories.length === 0">
        <i class="fas fa-check-circle"></i> Cr√©er l'exercice
      </button>
    </form>
  </div>
</div>